!function(n){"use strict";var t=function(t,i){this.$element=n(t);this.options=n.extend({},n.fn.typeahead.defaults,i);this.matcher=this.options.matcher||this.matcher;this.sorter=this.options.sorter||this.sorter;this.highlighter=this.options.highlighter||this.highlighter;this.updater=this.options.updater||this.updater;this.source=this.options.source;this.search=this.options.search;this.under=this.options.under||!1;this.fixed=this.options.fixed||!1;this.sort=this.options.sort||!1;this.input_text=this.options.input_text||!1;this.url=this.options.url||location.protocol+"//mention.cnblogs.com/mention-users";this.item_count=this.options.item_count||10;this.textValue;this.at_top;this.at_left;this.$menu=n(this.options.menu);this.shown=!1;this.listen()},i;t.prototype={constructor:t,select:function(){var n=" ",t;return this.query==""&&(n=""),t=this.$menu.find(".active").text(),this.$element.val(this.updater(t+n)).change(),this.hide()},updater:function(n){return n},show:function(){var t=n.extend({},this.$element.position(),{height:this.$element[0].offsetHeight}),i,r;return this.shown&&this.fixed?this.$menu.show():(this.under?(i=t.top+this.at_top,r=t.left+this.at_left):this.input_text?(i=t.top+t.height,r=t.left+this.at_left):(i=t.top+t.height,r=t.left),this.$menu.insertAfter(this.$element).css({top:i,left:r}).show()),this.shown=!0,this},hide:function(){return this.$menu.hide(),this.shown=!1,this},lookup:function(){var i=this,t;if(this.query=this.$element.val(),this.textValue=this.query,!this.query||this.query.length<this.options.minLength)return this.shown?this.hide():this;if(this.matcher())if(this.search)if(this.query=="")this.$menu.html('<b class="tips">ËæìÂÖ•Ë¶Å@ÁöÑ‰∫∫<\/b>'),this.show();else return this.source=this.search(this.query),t=this.source,t?this.process(t):this;else this.query==""?(this.$menu.html('<b class="tips">ËæìÂÖ•Ë¶Å@ÁöÑ‰∫∫<\/b>'),this.show()):n.ajax({timeout:1e3,type:"get",dataType:"json",contentType:"application/json; charset=utf-8",url:this.url+"?displayName="+encodeURIComponent(this.query)+"&itemCount="+this.item_count,success:function(n){return i.source=n,t=i.source,t?i.process(t):this},error:function(n){console.log(n)}});else this.shown&&this.hide()},process:function(n){var t=this;return(this.sort&&(n=this.sorter(n)),!n.length)?this.shown?this.hide():this:this.render(n.slice(0,this.options.items)).show()},matcher:function(n){return~n.toLowerCase().indexOf(this.query.toLowerCase())},sorter:function(n){for(var i=[],r=[],u=[],t;t=n.shift();)t.toLowerCase().indexOf(this.query.toLowerCase())?~t.indexOf(this.query)?r.push(t):u.push(t):i.push(t);return i.concat(r,u)},highlighter:function(n){var t=this.textValue.replace(/[\-\[\]{}()*+?.,\\\^$|#\s]/g,"\\$&");return n.replace(new RegExp("("+t+")","ig"),function(n,t){return"<strong>"+t+"<\/strong>"})},render:function(t){var i=this;return t=n(t).map(function(t,r){return t=n(i.options.item).text(r),t.find("a").html(i.highlighter(r)),t[0]}),t.first().addClass("active"),this.$menu.html(t),this},next:function(){var i=this.$menu.find(".active").removeClass("active"),t=i.next();t.length||(t=n(this.$menu.find("li")[0]));t.addClass("active")},prev:function(){var t=this.$menu.find(".active").removeClass("active"),n=t.prev();n.length||(n=this.$menu.find("li").last());n.addClass("active")},listen:function(){this.$element.on("focus",n.proxy(this.focus,this)).on("blur",n.proxy(this.blur,this)).on("keypress",n.proxy(this.keypress,this)).on("keyup",n.proxy(this.keyup,this));if(this.eventSupported("keydown"))this.$element.on("keydown",n.proxy(this.keydown,this));this.$menu.on("click","li",n.proxy(this.click,this)).on("mouseenter","li",n.proxy(this.mouseenter,this)).on("mouseleave","li",n.proxy(this.mouseleave,this))},eventSupported:function(n){var t=n in this.$element;return t||(this.$element.setAttribute(n,"return;"),t=typeof this.$element[n]=="function"),t},move:function(n){if(this.shown){switch(n.keyCode){case 9:case 13:case 27:n.preventDefault();break;case 38:n.preventDefault();this.prev();break;case 40:n.preventDefault();this.next()}n.stopPropagation()}},keydown:function(t){this.suppressKeyPressRepeat=~n.inArray(t.keyCode,[40,38,9,13,27]);this.move(t)},keypress:function(n){this.suppressKeyPressRepeat||this.move(n)},keyup:function(n){switch(n.keyCode){case 40:case 38:case 16:case 17:case 18:break;case 9:case 13:if(!this.shown)return;this.select();break;case 27:if(!this.shown)return;this.hide();break;default:this.lookup()}n.stopPropagation();n.preventDefault()},focus:function(){this.focused=!0},blur:function(){this.focused=!1;!this.mousedover&&this.shown&&this.hide()},click:function(n){n.stopPropagation();n.preventDefault();this.select();this.$element.focus()},mouseenter:function(t){this.mousedover=!0;this.$menu.find(".active").removeClass("active");n(t.currentTarget).addClass("active")},mouseleave:function(){this.mousedover=!1;!this.focused&&this.shown&&this.hide()}};i=n.fn.typeahead;n.fn.typeahead=function(i){return this.each(function(){var u=n(this),r=u.data("typeahead"),f=typeof i=="object"&&i;r||u.data("typeahead",r=new t(this,f));typeof i=="string"&&r[i]()})};n.fn.typeahead.defaults={source:[],items:8,menu:'<ul class="typeahead dropdown-menu"><\/ul>',item:'<li><a href="#"><\/a><\/li>',minLength:1};n.fn.typeahead.Constructor=t;n.fn.typeahead.noConflict=function(){return n.fn.typeahead=i,this};n(document).on("focus.typeahead.data-api",'[data-provide="typeahead"]',function(){var t=n(this);t.data("typeahead")||t.typeahead(t.data())})}(window.jQuery),function(n){n.fn.extend({mention:function(t){this.opts={users:[],delimiter:"@",sensitive:!0,queryBy:"DisplayName",typeaheadOpts:{}};var i=n.extend({},this.opts,t),r=function(){if(typeof n=="undefined")throw new Error("jQuery is Required");else if(typeof n.fn.typeahead=="undefined")throw new Error("Typeahead is Required");return!0},u=function(n,t){for(var r=t;r>=0;r--)if(n[r]==i.delimiter)break;return n.substring(r,t)},f=function(){var n;if(this.query=this.query.toLowerCase(),this.query.indexOf(i.delimiter)>-1){var u=this.query.lastIndexOf(i.delimiter),t=document.querySelector("#"+this.$element[0].id),r=getCaretCoordinates(t,this.query.lastIndexOf(i.delimiter)+1),f=getComputedStyle(t).getPropertyValue("font-size").replace("px","");if(this.at_top=r.top+parseInt(f),this.at_left=r.left,n=this.query.substring(u+1),n.indexOf(" ")==-1&&n.length>0)this.query=n;else{if(n!="")return!1;this.query=""}return!0}return!1},e=function(n){for(var t=this.textValue,u=this.$element[0].selectionStart,r=u;r>=0;r--)if(t[r]==i.delimiter)break;var o=t.substring(r,u),f=t.substring(0,r),e=t.substring(u),t=f+i.delimiter+n+e;return this.tempQuery=t,t},o=function(n){var t,s;if(n.length&&i.sensitive){var e=u(this.query,this.$element[0].selectionStart).substring(1),r,h=n.length,f={highest:[],high:[],med:[],low:[]},o=[];if(e.length==1){for(r=0;r<h;r++)t=n[r],t.DisplayName[0]==e?f.highest.push(t):t.DisplayName[0].toLowerCase()==e.toLowerCase()?f.high.push(t):t.DisplayName.indexOf(e)!=-1?f.med.push(t):f.low.push(t);for(r in f)for(s in f[r])o.push(f[r][s]);return o}}return n},s=function(t){var i=this;return t=n(t).map(function(t,r){t=n(i.options.item);var u=n("<div />");return r.IconUrl&&u.append('<img class="mention_image" src="'+r.IconUrl+'">'),r.DisplayName&&u.append('<b class="mention_name">'+r.DisplayName+"<\/b>"),t.find("a").html(i.highlighter(u.html())),t[0]}),t.first().addClass("active"),this.$menu.html(t),this};return n.fn.typeahead.Constructor.prototype.render=s,this.each(function(){var t=n(this);r()&&t.typeahead(n.extend({source:i.users,matcher:f,updater:e,sorter:o},i.typeaheadOpts))})}})}(jQuery),function(){function n(n,r){var u=document.createElement("div"),f,e,o,s;return u.id="input-textarea-caret-position-mirror-div",document.body.appendChild(u),f=u.style,e=window.getComputedStyle?getComputedStyle(n):n.currentStyle,f.whiteSpace="pre-wrap",n.nodeName!=="INPUT"&&(f.wordWrap="break-word"),f.position="absolute",f.visibility="hidden",t.forEach(function(n){f[n]=e[n]}),i?n.scrollHeight>parseInt(e.height)&&(f.overflowY="scroll"):f.overflow="hidden",u.textContent=n.value.substring(0,r),n.nodeName==="INPUT"&&(u.textContent=u.textContent.replace(/\s/g,"¬†")),o=document.createElement("span"),o.textContent=n.value.substring(r)||".",u.appendChild(o),s={top:o.offsetTop+parseInt(e.borderTopWidth),left:o.offsetLeft+parseInt(e.borderLeftWidth)},document.body.removeChild(u),s}var t=["direction","boxSizing","width","height","overflowX","overflowY","borderTopWidth","borderRightWidth","borderBottomWidth","borderLeftWidth","borderStyle","paddingTop","paddingRight","paddingBottom","paddingLeft","fontStyle","fontVariant","fontWeight","fontStretch","fontSize","fontSizeAdjust","lineHeight","fontFamily","textAlign","textTransform","textIndent","textDecoration","letterSpacing","wordSpacing","tabSize","MozTabSize"],i=window.mozInnerScreenX!=null;typeof module!="undefined"&&typeof module.exports!="undefined"?module.exports=n:window.getCaretCoordinates=n}()¬:≥˘      X&X2=æ◊YÛE£   J    :http://mention.cnblogs.com/bundles/mention.js?id=20160615&_=1477579302222 necko:classified 1 request-method GET request-User-Agent Mozilla/5.0 (X11; Ubuntu; Linux x86_64; rv:47.0) Gecko/20100101 Firefox/47.0 response-head HTTP/1.1 200 OK
Server: Tengine
Content-Type: text/javascript; charset=utf-8
Content-Length: 8960
Date: Thu, 27 Oct 2016 14:41:48 GMT
Cache-Control: public
Expires: Fri, 27 Oct 2017 14:41:48 GMT
Last-Modified: Thu, 27 Oct 2016 14:41:48 GMT
Vary: User-Agent
X-AspNet-Version: 4.0.30319
X-Powered-By: ASP.NET
X-UA-Compatible: IE=10
Via: cache2.l2et15[7,200-0,M], cache11.l2et15[8,0], kunlun8.cn253[7942,200-0,M], kunlun8.cn253[7943,0]
Age: 0
X-Cache: MISS TCP_MISS dirn:-2:-2
X-Swift-SaveTime: Thu, 27 Oct 2016 14:41:51 GMT
X-Swift-CacheTime: 31535997
Timing-Allow-Origin: *
EagleId: b7cb1d8814775793037547696e
 uncompressed-len 0   # 